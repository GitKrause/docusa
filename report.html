<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Álvaro Krause">

<title>Estimación de la tasa de desocupación comunal mediante Small Area Estimation bayesiano</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#resumen-ejecutivo" id="toc-resumen-ejecutivo" class="nav-link active" data-scroll-target="#resumen-ejecutivo">Resumen ejecutivo</a></li>
  <li><a href="#introducción" id="toc-introducción" class="nav-link" data-scroll-target="#introducción"><span class="header-section-number">1</span> Introducción</a>
  <ul class="collapse">
  <li><a href="#contexto-y-motivación" id="toc-contexto-y-motivación" class="nav-link" data-scroll-target="#contexto-y-motivación"><span class="header-section-number">1.1</span> Contexto y motivación</a></li>
  <li><a href="#objetivos" id="toc-objetivos" class="nav-link" data-scroll-target="#objetivos"><span class="header-section-number">1.2</span> Objetivos</a>
  <ul class="collapse">
  <li><a href="#objetivo-general" id="toc-objetivo-general" class="nav-link" data-scroll-target="#objetivo-general"><span class="header-section-number">1.2.1</span> Objetivo general</a></li>
  <li><a href="#objetivos-específicos" id="toc-objetivos-específicos" class="nav-link" data-scroll-target="#objetivos-específicos"><span class="header-section-number">1.2.2</span> Objetivos específicos</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#marco-conceptual" id="toc-marco-conceptual" class="nav-link" data-scroll-target="#marco-conceptual"><span class="header-section-number">2</span> Marco conceptual</a>
  <ul class="collapse">
  <li><a href="#indicadores-del-mercado-laboral" id="toc-indicadores-del-mercado-laboral" class="nav-link" data-scroll-target="#indicadores-del-mercado-laboral"><span class="header-section-number">2.1</span> Indicadores del mercado laboral</a></li>
  <li><a href="#small-area-estimation" id="toc-small-area-estimation" class="nav-link" data-scroll-target="#small-area-estimation"><span class="header-section-number">2.2</span> Small Area Estimation</a></li>
  </ul></li>
  <li><a href="#fuentes-de-información" id="toc-fuentes-de-información" class="nav-link" data-scroll-target="#fuentes-de-información"><span class="header-section-number">3</span> Fuentes de información</a>
  <ul class="collapse">
  <li><a href="#encuesta-base" id="toc-encuesta-base" class="nav-link" data-scroll-target="#encuesta-base"><span class="header-section-number">3.1</span> Encuesta base</a></li>
  <li><a href="#información-auxiliar" id="toc-información-auxiliar" class="nav-link" data-scroll-target="#información-auxiliar"><span class="header-section-number">3.2</span> Información auxiliar</a></li>
  </ul></li>
  <li><a href="#modelo-estadístico" id="toc-modelo-estadístico" class="nav-link" data-scroll-target="#modelo-estadístico"><span class="header-section-number">4</span> Modelo estadístico</a>
  <ul class="collapse">
  <li><a href="#modelo-de-muestreo" id="toc-modelo-de-muestreo" class="nav-link" data-scroll-target="#modelo-de-muestreo"><span class="header-section-number">4.1</span> Modelo de muestreo</a></li>
  <li><a href="#modelo-estructural" id="toc-modelo-estructural" class="nav-link" data-scroll-target="#modelo-estructural"><span class="header-section-number">4.2</span> Modelo estructural</a></li>
  <li><a href="#efectos-aleatorios" id="toc-efectos-aleatorios" class="nav-link" data-scroll-target="#efectos-aleatorios"><span class="header-section-number">4.3</span> Efectos aleatorios</a></li>
  </ul></li>
  <li><a href="#inferencia-bayesiana" id="toc-inferencia-bayesiana" class="nav-link" data-scroll-target="#inferencia-bayesiana"><span class="header-section-number">5</span> Inferencia bayesiana</a>
  <ul class="collapse">
  <li><a href="#priori" id="toc-priori" class="nav-link" data-scroll-target="#priori"><span class="header-section-number">5.1</span> Priori</a></li>
  <li><a href="#estimación" id="toc-estimación" class="nav-link" data-scroll-target="#estimación"><span class="header-section-number">5.2</span> Estimación</a></li>
  </ul></li>
  <li><a href="#resultados" id="toc-resultados" class="nav-link" data-scroll-target="#resultados"><span class="header-section-number">6</span> Resultados</a>
  <ul class="collapse">
  <li><a href="#estimaciones-comunales" id="toc-estimaciones-comunales" class="nav-link" data-scroll-target="#estimaciones-comunales"><span class="header-section-number">6.1</span> Estimaciones comunales</a></li>
  <li><a href="#comparación-con-estimación-directa" id="toc-comparación-con-estimación-directa" class="nav-link" data-scroll-target="#comparación-con-estimación-directa"><span class="header-section-number">6.2</span> Comparación con estimación directa</a></li>
  </ul></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones"><span class="header-section-number">7</span> Conclusiones</a></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias">Referencias</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Otros formatos</h2><ul><li><a href="report.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Estimación de la tasa de desocupación comunal mediante Small Area Estimation bayesiano</h1>
<p class="subtitle lead">Modelo multinomial logit</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>Álvaro Krause </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Fecha de publicación</div>
    <div class="quarto-title-meta-contents">
      <p class="date">23 de enero de 2026</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="resumen-ejecutivo" class="level1 unnumbered">
<h1 class="unnumbered">Resumen ejecutivo</h1>
<p>Este informe presenta la metodología y los resultados de la aplicación de Small Area Estimation (SAE) para la estimación de la tasa de desocupación a nivel comunal, utilizando un modelo bayesiano multinomial con enlace logit. El enfoque permite mejorar la precisión de las estimaciones en dominios con tamaños muestrales reducidos, manteniendo coherencia con las definiciones oficiales del mercado laboral.</p>
</section>
<section id="introducción" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introducción</h1>
<section id="contexto-y-motivación" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="contexto-y-motivación"><span class="header-section-number">1.1</span> Contexto y motivación</h2>
<p>La estimación directa de indicadores laborales a nivel comunal presenta limitaciones importantes debido a la alta variabilidad asociada a tamaños muestrales pequeños. La metodología SAE permite superar estas limitaciones mediante el uso de modelos estadísticos que integran información auxiliar.</p>
</section>
<section id="objetivos" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="objetivos"><span class="header-section-number">1.2</span> Objetivos</h2>
<section id="objetivo-general" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="objetivo-general"><span class="header-section-number">1.2.1</span> Objetivo general</h3>
<p>Estimar la tasa de desocupación comunal mediante un modelo bayesiano de Small Area Estimation.</p>
</section>
<section id="objetivos-específicos" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="objetivos-específicos"><span class="header-section-number">1.2.2</span> Objetivos específicos</h3>
<ul>
<li>Incorporar información auxiliar a nivel comunal.</li>
<li>Reducir la varianza de las estimaciones respecto de los estimadores directos.</li>
<li>Garantizar coherencia interna entre categorías laborales.</li>
</ul>
</section>
</section>
</section>
<section id="marco-conceptual" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Marco conceptual</h1>
<section id="indicadores-del-mercado-laboral" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="indicadores-del-mercado-laboral"><span class="header-section-number">2.1</span> Indicadores del mercado laboral</h2>
<p>Se consideran las categorías de ocupados, desocupados e inactivos, de acuerdo con las definiciones oficiales vigentes. Para cada comuna <span class="math inline">\(d\)</span>, se define el vector de proporciones poblacionales:</p>
<p><span class="math display">\[
\boldsymbol{\theta}*d = (\theta*{d1}, \theta_{d2}, \theta_{d3})
\]</span></p>
<p>donde los subíndices corresponden a ocupados, desocupados e inactivos, respectivamente, y se cumple:</p>
<p><span class="math display">\[
\sum_{k=1}^3 \theta_{dk} = 1.
\]</span></p>
</section>
<section id="small-area-estimation" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="small-area-estimation"><span class="header-section-number">2.2</span> Small Area Estimation</h2>
<p>El enfoque SAE se basa en la especificación de un modelo probabilístico que vincula los parámetros de interés con información auxiliar disponible para todas las áreas, permitiendo estabilizar las estimaciones en dominios pequeños.</p>
</section>
</section>
<section id="fuentes-de-información" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Fuentes de información</h1>
<section id="encuesta-base" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="encuesta-base"><span class="header-section-number">3.1</span> Encuesta base</h2>
<p>La estimación se basa en una encuesta de hogares con diseño muestral complejo. Para cada comuna <span class="math inline">\(d\)</span> se observa un vector de conteos:</p>
<p><span class="math display">\[
\boldsymbol{y}*d = (y*{d1}, y_{d2}, y_{d3})
\]</span></p>
<p>con tamaño muestral total <span class="math inline">\(n_d = \sum_{k=1}^3 y_{dk}\)</span>.</p>
</section>
<section id="información-auxiliar" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="información-auxiliar"><span class="header-section-number">3.2</span> Información auxiliar</h2>
<p>Se utilizan variables auxiliares a nivel comunal provenientes de fuentes censales y registros administrativos, recopiladas en el vector <span class="math inline">\(\boldsymbol{x}_d\)</span>.</p>
</section>
</section>
<section id="modelo-estadístico" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Modelo estadístico</h1>
<section id="modelo-de-muestreo" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="modelo-de-muestreo"><span class="header-section-number">4.1</span> Modelo de muestreo</h2>
<p>Condicional a las proporciones verdaderas <span class="math inline">\(\boldsymbol{\theta}_d\)</span>, se asume que los conteos muestrales siguen una distribución multinomial:</p>
<p><span class="math display">\[
\boldsymbol{y}_d \mid \boldsymbol{\theta}_d \sim \text{Multinomial}(n_d, \boldsymbol{\theta}_d).
\]</span></p>
</section>
<section id="modelo-estructural" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="modelo-estructural"><span class="header-section-number">4.2</span> Modelo estructural</h2>
<p>Se adopta un modelo multinomial logit, tomando como categoría de referencia <span class="math inline">\(k = 3\)</span> (inactivos). Para <span class="math inline">\(k = 1,2\)</span>:</p>
<p><span class="math display">\[
\log\left(\frac{\theta_{dk}}{\theta_{d3}}\right) = \boldsymbol{x}_d^\top \boldsymbol{\beta}*k + u*{dk},
\]</span></p>
<p>donde <span class="math inline">\(\boldsymbol{\beta}*k\)</span> es un vector de coeficientes fijos y <span class="math inline">\(u*{dk}\)</span> corresponde a un efecto aleatorio comunal.</p>
</section>
<section id="efectos-aleatorios" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="efectos-aleatorios"><span class="header-section-number">4.3</span> Efectos aleatorios</h2>
<p>Los efectos aleatorios se modelan como:</p>
<p><span class="math display">\[
u_{dk} \sim \mathcal{N}(0, \sigma_k^2),
\]</span></p>
<p>asumiendo independencia entre comunas.</p>
</section>
</section>
<section id="inferencia-bayesiana" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Inferencia bayesiana</h1>
<section id="priori" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="priori"><span class="header-section-number">5.1</span> Priori</h2>
<p>Se especifican distribuciones a priori débiles para los parámetros del modelo:</p>
<p><span class="math display">\[
\boldsymbol{\beta}_k \sim \mathcal{N}(0, \tau^2 I), \qquad \sigma_k \sim \text{Half-Cauchy}(0, A).
\]</span></p>
</section>
<section id="estimación" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="estimación"><span class="header-section-number">5.2</span> Estimación</h2>
<p>La inferencia se realiza mediante simulación MCMC, obteniendo muestras de la distribución posterior de los parámetros y de las proporciones comunales.</p>
</section>
</section>
<section id="resultados" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Resultados</h1>
<section id="estimaciones-comunales" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="estimaciones-comunales"><span class="header-section-number">6.1</span> Estimaciones comunales</h2>
<p>La tasa de desocupación comunal se define como:</p>
<p><span class="math display">\[
TD_d = \theta_{d2}.
\]</span></p>
<p>Se reportan estimaciones puntuales posteriores y intervalos de credibilidad al 95%.</p>
</section>
<section id="comparación-con-estimación-directa" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="comparación-con-estimación-directa"><span class="header-section-number">6.2</span> Comparación con estimación directa</h2>
<p>Las estimaciones SAE se comparan con los estimadores directos en términos de precisión y estabilidad.</p>
</section>
</section>
<section id="conclusiones" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Conclusiones</h1>
<p>La aplicación del modelo bayesiano multinomial SAE permite obtener estimaciones comunales más precisas y coherentes de la tasa de desocupación, constituyendo una herramienta robusta para la producción estadística oficial.</p>
</section>
<section id="referencias" class="level1 unnumbered">
<h1 class="unnumbered">Referencias</h1>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>